{% extends 'base.html' %}
{% block title %}
    {{ name }}
{% endblock title %}
{% block content %}
    <div class="post">
        {% for post in thread.post_set.all %}
            
            {% if post.id == thread.post_set.first.id %}
                <div id="{{post.local_id}}">
                <p class="post-title">{{ thread.title }}</p>
                <p class="post-author">Анон</p>
                <p class="post-date">{{ thread.date|date:'Y-m-d H:i' }}</p>
            {% else %}
                <div class="post reply" id="{{post.local_id}}">
                <p class="post-author">Анон</p>
                <p class="post-date">{{ post.date|date:'Y-m-d H:i' }}</p>
            {% endif %}
            <p class="post-id"><a href="#{{ post.local_id }}">#</a>{{ post.local_id }}</p>
            <div class="post-content">
                {% for file in post.attachment_set.all %}
                    <div class="attachment">
                        <a href="{{ file.file.url }}" target="_blank">{{ file.file.name }}</a>
                        <img src="{{file.file.url}}">
                    </div>
                {% endfor %}
                <span class="post-text">{{ post.content|linebreaks }}</span>
                </div>
            </div>
        {% endfor %}
    <div class='post reply'>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        {% comment %}
        <input type="hidden" name="board" value="{{ board }}">
        <input type="hidden" name="thread" value="{{ thread.id }}">

        <textarea name="content" placeholder="Написать ответ в тред..." required></textarea>
        <input type="file" name="files" multiple>
        <br>
        {% endcomment %}
        {{ reply_form.as_p }}
        <div style="display: flex; justify-content: center; margin-bottom: 3px;"><button type="submit" name="reply">Ответить</button></div>
        </form>
    </div>
    </div>
{% endblock content %}